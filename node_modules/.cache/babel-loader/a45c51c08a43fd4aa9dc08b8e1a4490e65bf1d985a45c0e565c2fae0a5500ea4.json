{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC-Fernando\\\\Desktop\\\\estacaoDigital\\\\estacao-digital\\\\src\\\\components\\\\Resultado\\\\resultado.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport './resultado.css';\nimport AppContext from '../../context/AppContext';\nimport { useParams } from 'react-router-dom';\nimport { fetchByID } from '../../api/fetchProducts';\nimport formatCurrency from '../../utils/formatCurrency';\nimport Loading from '../Loading/Loading';\nimport Counter from '../redux/Counter';\nimport Frete from '../Frete/frete';\nimport Compra from '../Compra/compra';\nimport { db } from '../../services/firebaseConfig';\nimport { collection, addDoc } from 'firebase/firestore';\nimport { getAuth, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductResult() {\n  _s();\n  const {\n    loading,\n    setLoading\n  } = useContext(AppContext);\n  const {\n    id\n  } = useParams();\n  const [produto, setProduto] = useState({});\n  const [quantity, setQuantity] = useState(0);\n  const auth = getAuth();\n  const [userID, setUserID] = useState(null);\n  useEffect(() => {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        const userID = user.uid;\n        setUserID(userID);\n      } else {\n        setUserID(null);\n      }\n    });\n  }, [auth]);\n  useEffect(() => {\n    fetchByID(id).then(resultado => {\n      setProduto(resultado);\n      setQuantity(resultado.quantity || 0);\n      setLoading(false);\n    });\n  }, [auth]);\n  const handleAddProductToFirestore = async newQuantity => {\n    try {\n      const docRef = await addDoc(collection(db, 'carrinho'), {\n        title: produto.title,\n        thumbnail: produto.thumbnail,\n        id: id,\n        quantidade: newQuantity,\n        userID: userID // Inclua o userID ao enviar para o Firestore\n      });\n\n      console.log('Informações do produto adicionadas com sucesso com ID: ', docRef.id);\n      setQuantity(newQuantity);\n    } catch (error) {\n      console.error('Erro ao adicionar informações do produto ao Firestore: ', error);\n    }\n  };\n  return loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 17\n  }, this) || /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"product-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: produto.thumbnail.replace(/\\w\\.jpg/gi, 'W.jpg'),\n      alt: \"product\",\n      className: \"card-image\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Card-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \" card-title\",\n        children: produto.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"card-price\",\n        children: [\" \", formatCurrency(produto.price, 'BRL')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"card-desc\",\n        children: produto.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Counter, {\n        productId: id,\n        quantity: quantity,\n        handleQuantityChange: handleAddProductToFirestore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Frete, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Compra, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductResult, \"kR2KZ3iQz4h0ziLAtGtCtU3CvPg=\", false, function () {\n  return [useParams];\n});\n_c = ProductResult;\nexport default ProductResult;\nvar _c;\n$RefreshReg$(_c, \"ProductResult\");","map":{"version":3,"names":["React","useContext","useEffect","useState","AppContext","useParams","fetchByID","formatCurrency","Loading","Counter","Frete","Compra","db","collection","addDoc","getAuth","onAuthStateChanged","signOut","jsxDEV","_jsxDEV","ProductResult","_s","loading","setLoading","id","produto","setProduto","quantity","setQuantity","auth","userID","setUserID","user","uid","then","resultado","handleAddProductToFirestore","newQuantity","docRef","title","thumbnail","quantidade","console","log","error","fileName","_jsxFileName","lineNumber","columnNumber","className","children","src","replace","alt","price","productId","handleQuantityChange","_c","$RefreshReg$"],"sources":["C:/Users/PC-Fernando/Desktop/estacaoDigital/estacao-digital/src/components/Resultado/resultado.js"],"sourcesContent":["import React, {useContext, useEffect, useState } from 'react';\nimport './resultado.css'\nimport AppContext from '../../context/AppContext';\nimport { useParams } from 'react-router-dom';\nimport { fetchByID } from '../../api/fetchProducts';\nimport formatCurrency from '../../utils/formatCurrency';\nimport Loading from '../Loading/Loading';\nimport Counter from '../redux/Counter';\nimport Frete from '../Frete/frete'\nimport Compra from '../Compra/compra'\nimport { db } from '../../services/firebaseConfig';\nimport { collection, addDoc } from 'firebase/firestore';\nimport { getAuth, onAuthStateChanged, signOut } from 'firebase/auth';\n\n\n\nfunction ProductResult(){ \n  const {loading, setLoading } = useContext(AppContext);\n  const {id}= useParams();\n  const [produto, setProduto] = useState({})\n  const [quantity, setQuantity] = useState(0);\n  const auth = getAuth();\n  const [userID, setUserID] = useState(null);\n  useEffect(() => {\n    onAuthStateChanged(auth, (user) => {\n      if (user) {\n        const userID = user.uid;\n        setUserID(userID); \n      } else {\n        \n        setUserID(null); \n      }\n    });\n  }, [auth]);\n\n  useEffect(() => {\n    fetchByID(id).then((resultado) => {\n      setProduto(resultado);\n      setQuantity(resultado.quantity || 0);\n      setLoading(false);\n    });\n  }, [auth]);\n\n  const handleAddProductToFirestore = async (newQuantity) => {\n    try {\n      const docRef = await addDoc(collection(db, 'carrinho'), {\n        title: produto.title,\n        thumbnail: produto.thumbnail,\n        id: id,\n        quantidade: newQuantity,\n        userID: userID, // Inclua o userID ao enviar para o Firestore\n      });\n      console.log('Informações do produto adicionadas com sucesso com ID: ', docRef.id);\n      setQuantity(newQuantity);\n    } catch (error) {\n      console.error('Erro ao adicionar informações do produto ao Firestore: ', error);\n    }\n  };\n\n  return(\n    (loading && <Loading /> ) || (\n    <section className='product-card'>\n        <img\n        src= {produto.thumbnail.replace(/\\w\\.jpg/gi, 'W.jpg')}\n        alt='product'\n        className='card-image'\n        />\n        <div className='Card-info'>\n          <h2 className=' card-title'>{produto.title}</h2>\n          <h4 className='card-price'> {formatCurrency(produto.price, 'BRL')}</h4>\n          <span className='card-desc'>{produto.title}</span>\n          <Counter productId={id} quantity={quantity} handleQuantityChange={handleAddProductToFirestore}/>\n          <Frete/>\n          <Compra/>\n        </div>\n    </section>\n    )\n  );\n}\nexport default ProductResult;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}